
<header class="bg-danger text-white py-4">
  <div class="container">
    <h1 class="mb-0">FTView Demo Displays Translation!</h1>
  </div>
</header>

<div class="container my-4">
  <div class="language-panel">
    <div class="language-select">
      <!-- Source Language Dropdown -->    
      <label for="sourceLanguage" class="form-label">Source Language</label>
      <select class="form-select" id="sourceLanguage" name="sourceLanguage" [(ngModel)]="translateFilesData.sourceLanguage">
        <option value="English">English</option>
        <option value="Chinese">Chinese</option>
        <option value="French">French</option>
        <!-- Add more options as needed -->
      </select>    
    </div>
    <div class="language-select">
      <!-- Target Language Dropdown -->    
      <label for="targetLanguage" class="form-label">Target Language</label>
      <select class="form-select" id="targetLanguage" name="targetLanguage" [(ngModel)]="translateFilesData.targetLanguage">
        <option value="English">English</option>
        <option value="Chinese">Chinese</option>
        <option value="French">French</option>
        <!-- Add more options as needed -->
      </select>
    </div> 
  </div>

<div class="file-table">
  <div class="drop-zone" (dragover)="onDragOver($event)" (drop)="onDrop($event)">
    <p>Drag & drop files here or <span class="browse-link" (click)="browseFiles()">browse</span></p>
  </div>
  <input type="file" #fileInput style="display: none;" (change)="onFileSelected($event)" multiple>
   
  <div *ngIf="uploadInProgress">
    <progress max="100" [value]="uploadProgress"></progress>
  </div>
   
  <table >
  <thead>
    <tr>
      <th>File Id</th>
      <th>File Name</th>
      <th>Size</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let uploadedFile of uploadedFiles"> <!--use array for uploaded file, becasue we need to show them one by one-->
      <td>{{ uploadedFile.fileId }}</td>
      <td>{{ uploadedFile.fileData.fileName }}</td>
      <td>{{ uploadedFile.fileData.fileSize | fileSize }}</td>
      <td>
        <div [ngClass]="{ 'status-uploading': uploadedFile.status === 'Uploading', 
        'status-completed': uploadedFile.status === 'Completed', 
        'status-failed': uploadedFile.status === 'Failed' }">
          {{ uploadedFile.status }}
        </div>
      </td>
      <td><button (click)="deleteFile(uploadedFile.fileId)">Delete</button></td>
    </tr>
  </tbody>
</table>
</div>
<div class="translate-button-container">
  <button class="translate-button" (click)="translateFiles()">Translate Files</button>
  <span *ngIf="loading === true" class="spinner-border text-primary" role="status" aria-hidden="true" style="margin-left: 5px;"></span>
</div>
<div class="file-table">
  <table >
    <thead>
      <tr>
        <th>File Id</th>
        <th>File Name</th>
        <th>Actions</th>
        <th>Count TM</th>
        <th>Count MT</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let keyValue of translatedFiles | keyvalue">
        <td>{{ keyValue.key }}</td>
        <td>{{ translatedFiles[keyValue.key].fileName }}</td>
        <td>
          <!-- View -->
          <!-- Link to the comparison page -->
          <!-- 
          <a routerLink="/comparison">View Comparison</a>
          <img src="assets/images/view.jfif" alt="View Image" (click)="viewFile(keyValue.key)" class="cell-image bi bi-eye bi-sm text-primary icon-with-tooltip"
          data-bs-toggle="tooltip" data-bs-placement="top" title="Open file">
          -->
          <!-- Download -->
          <img src="assets/images/download.jfif" alt="Download Image" (click)="downloadFile(keyValue.key)" class="cell-image bi bi-eye bi-sm text-primary icon-with-tooltip"
          data-bs-toggle="tooltip" data-bs-placement="top" title="Download file">
          
        </td>
        <td>{{translatedFiles[keyValue.key].countTM}}</td>
        <td>{{translatedFiles[keyValue.key].countMT}}</td>
      </tr>
    </tbody>
  </table>
</div>
</div>
